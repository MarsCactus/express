webpackJsonp([1],{"6EMT":function(t,e){},GCWt:function(t,e){},Kmnn:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=o("VU/8")({name:"App"},r,!1,function(t){o("PeR1")},null,null).exports,a=o("/ocq"),i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"hello"},[o("h1",[t._v(t._s(t.msg))]),t._v(" "),o("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),o("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",[o("li",[o("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),o("li",[o("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),o("li",[o("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),o("li",[o("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),o("br"),t._v(" "),o("li",[o("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};o("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},i,!1,function(t){o("Ugm9")},"data-v-694cd902",null).exports;var l=o("mtWM"),m=o.n(l),c=function(t,e){return m.a.post("/login",{name:t,password:e})},u=o("NYxO");n.default.use(u.a);var f={name:""};sessionStorage.getItem("name")&&(f.name=sessionStorage.getItem("name"));var h=new u.a.Store({state:f,mutations:{changeName:function(t,e){t.name=e}}}),d={name:"index",store:h,data:function(){return{form:{name:"",passsword:""}}},methods:{onSubmit:function(){var t=this,e=(this.form.name,this.form.passsword,this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}));c(this.form.name,this.form.passsword).then(function(o){e.close(),1==(o=o.data).code?t.$message.success({message:"登陆成功",duration:2e3,onClose:function(){t.$store.commit("changeName",t.form.name),sessionStorage.setItem("name",t.form.name),t.$router.push("main")}}):t.$message.error(o.msg)}).catch(function(e){t.$message.error("登陆失败"),console.log(e)})}},mounted:function(){console.log(c)}},p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"conent"},[o("h3",[t._v("登陆")]),t._v(" "),o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"0px"}},[o("el-form-item",{attrs:{label:""}},[o("el-input",{attrs:{placeholder:"用户名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:""}},[o("el-input",{attrs:{placeholder:"密码"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSubmit(e):null}},model:{value:t.form.passsword,callback:function(e){t.$set(t.form,"passsword",e)},expression:"form.passsword"}})],1),t._v(" "),o("el-form-item",[o("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("登陆")]),t._v(" "),o("router-link",{attrs:{to:"/register"}},[o("el-button",[t._v("注册")])],1)],1)],1)],1)},staticRenderFns:[]};var v=o("VU/8")(d,p,!1,function(t){o("Kmnn")},"data-v-fd9ef7e8",null).exports,g={name:"register",store:h,data:function(){return{form:{name:"",passsword:"",repPasssword:""}}},methods:{onSubmit:function(){if(this.form.passsword==this.form.repPasssword){var t,e,o=this,n=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});(t=this.form.name,e=this.form.passsword,m.a.post("/register",{name:t,password:e})).then(function(t){n.close(),1==(t=t.data).code?o.$message.success({message:"注册成功",duration:2e3,onClose:function(){o.$store.commit("changeName",o.form.name),sessionStorage.setItem("name",o.form.name),o.$router.push("main")}}):(console.log(error),o.$message.error("注册失败"))}).catch(function(t){console.log(t),o.$message.error("注册失败")})}else this.$message.error("重复密码与密码不一致")}}},_={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"conent"},[o("h3",[t._v("注册")]),t._v(" "),o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"0px"}},[o("el-form-item",{attrs:{label:""}},[o("el-input",{attrs:{placeholder:"用户名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:""}},[o("el-input",{attrs:{placeholder:"密码"},model:{value:t.form.passsword,callback:function(e){t.$set(t.form,"passsword",e)},expression:"form.passsword"}})],1),t._v(" "),o("el-form-item",{attrs:{label:""}},[o("el-input",{attrs:{placeholder:"重复密码"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSubmit(e):null}},model:{value:t.form.repPasssword,callback:function(e){t.$set(t.form,"repPasssword",e)},expression:"form.repPasssword"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("注册")])],1)],1)],1)},staticRenderFns:[]};var b=o("VU/8")(g,_,!1,function(t){o("6EMT")},"data-v-588e85b0",null).exports;function w(t){return("00"+t).substr(t.length)}var k={name:"forms",data:function(){return{form:{date:"",breakfast:0,lunch:0,dinner:0,traffic:0,sock:0,work:1,clothes:0,clothesRemind:"",play:0,playRemind:"",others:0,othersRemind:"",user:""},now:""}},mounted:function(){var t=new Date;this.now=this.form.date=function(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var n in o)if(new RegExp("("+n+")").test(e)){var r=o[n]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?r:w(r))}return e}(t,"yyyy-MM-dd"),this.init(),this.form.user=this.$store.state.name},computed:{eat:function(){return parseFloat(this.form.breakfast)+parseFloat(this.form.lunch)+parseFloat(this.form.dinner)},all:function(){return parseFloat(this.eat)+parseFloat(this.form.traffic)+parseFloat(this.form.sock)+parseFloat(this.form.clothes)+parseFloat(this.form.play)+parseFloat(this.form.others)}},methods:{gosubmit:function(){var t=this;this.$confirm("确认提交消费?","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(function(){t.onSubmit()}).catch(function(){})},onSubmit:function(){var t=this.form,e=1,o="";for(var n in t)if("playRemind"!=n&&"clothesRemind"!=n&&"othersRemind"!=n&&"date"!=n&&"user"!=n){if(console.log(t[n]),t[n]+""==""){e=0,o=n+"没填";break}t[n]=parseFloat(t[n]),console.log(t[n])}if(0!=e){var r,s=this;console.log(t),(r=t,m.a.post("/subSpending",r)).then(function(t){1==(t=t.data).code?(s.$message.success("提交成功"),s.$emit("goinit")):(console.log(o),s.$message.error("提交失败"))}).catch(function(t){s.$message.error("提交失败"),console.log(t)})}else this.$message.error(o)},change:function(){console.log(this.form.date),this.form.date<"2018-05-29"&&(this.form.date="2018-05-29",this.$message.error("2018-05-29是最早时间")),this.form.date>this.now&&(this.form.date=this.now,this.$message.error(this.now+"是最晚时间")),this.init()},init:function(){var t,e=this;(t=this.form.date,m.a.post("/getSpending",{date:t})).then(function(t){console.log(t),1==(t=t.data).code?t.data.length>0&&(e.form=t.data[0]):this.$message.error("系统异常")}).catch(function(t){this.$message.error("系统异常")})},formatInput:function(t){},blurInput:function(t){console.log(t);var e=this.form[t]+"";console.log(e),""==(e=e.replace(/[^\-?\d.]/g,""))&&(e=0),this.$set(this.form,t,e)}}},x={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"消费时间"}},[o("el-col",{attrs:{span:11}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.change},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1),t._v(" "),o("el-form-item",{staticClass:"eat",attrs:{label:"吃饭费用"}},[o("el-input",{attrs:{placeholder:"早",maxlength:"5"},on:{input:function(e){t.formatInput("breakfast")},blur:function(e){t.blurInput("breakfast")}},model:{value:t.form.breakfast,callback:function(e){t.$set(t.form,"breakfast",e)},expression:"form.breakfast"}}),t._v(" "),o("el-input",{attrs:{placeholder:"中",maxlength:"5"},on:{input:function(e){t.formatInput("lunch")},blur:function(e){t.blurInput("lunch")}},model:{value:t.form.lunch,callback:function(e){t.$set(t.form,"lunch",e)},expression:"form.lunch"}}),t._v(" "),o("el-input",{attrs:{placeholder:"晚",maxlength:"5"},on:{input:function(e){t.formatInput("dinner")},blur:function(e){t.blurInput("dinner")}},model:{value:t.form.dinner,callback:function(e){t.$set(t.form,"dinner",e)},expression:"form.dinner"}}),t._v(" "),o("span",[t._v("总计："+t._s(t.eat))])],1),t._v(" "),o("el-form-item",{attrs:{label:"交通费用"}},[o("el-input",{attrs:{type:""},on:{input:function(e){t.formatInput("traffic")},blur:function(e){t.blurInput("traffic")}},model:{value:t.form.traffic,callback:function(e){t.$set(t.form,"traffic",e)},expression:"form.traffic"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"零食费用"}},[o("el-input",{on:{input:function(e){t.formatInput("sock")},blur:function(e){t.blurInput("sock")}},model:{value:t.form.sock,callback:function(e){t.$set(t.form,"sock",e)},expression:"form.sock"}}),t._v(" "),o("span",[t._v("包含饮料，零食，大包零食记录首天")])],1),t._v(" "),o("el-form-item",{attrs:{label:"是否上班"}},[o("el-radio-group",{model:{value:t.form.work,callback:function(e){t.$set(t.form,"work",e)},expression:"form.work"}},[o("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),o("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"游玩费用"}},[o("el-input",{on:{input:function(e){t.formatInput("play")},blur:function(e){t.blurInput("play")}},model:{value:t.form.play,callback:function(e){t.$set(t.form,"play",e)},expression:"form.play"}})],1),t._v(" "),o("el-form-item",{attrs:{label:""}},[o("el-input",{attrs:{type:"textarea",placeholder:"游玩费用备注(非必填)"},model:{value:t.form.playRemind,callback:function(e){t.$set(t.form,"playRemind",e)},expression:"form.playRemind"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"服装费用"}},[o("el-input",{on:{input:function(e){t.formatInput("clothes")},blur:function(e){t.blurInput("clothes")}},model:{value:t.form.clothes,callback:function(e){t.$set(t.form,"clothes",e)},expression:"form.clothes"}})],1),t._v(" "),o("el-form-item",{attrs:{label:""}},[o("el-input",{attrs:{type:"textarea",placeholder:"服装费用备注(非必填)"},model:{value:t.form.clothesRemind,callback:function(e){t.$set(t.form,"clothesRemind",e)},expression:"form.clothesRemind"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"其他费用"}},[o("el-input",{on:{input:function(e){t.formatInput("others")},blur:function(e){t.blurInput("others")}},model:{value:t.form.others,callback:function(e){t.$set(t.form,"others",e)},expression:"form.others"}})],1),t._v(" "),o("el-form-item",{attrs:{label:""}},[o("el-input",{attrs:{type:"textarea",placeholder:"其他费用备注(非必填)"},model:{value:t.form.othersRemind,callback:function(e){t.$set(t.form,"othersRemind",e)},expression:"form.othersRemind"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"费用总计"}},[t._v("\n    "+t._s(t.all)+"\n  ")]),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.gosubmit}},[t._v("提交")])],1)],1)},staticRenderFns:[]};var y=o("VU/8")(k,x,!1,function(t){o("GCWt")},"data-v-2799d5fe",null).exports,$={name:"mains",store:h,data:function(){return{list:[1,2],activeIndex:"1",activeIndex2:"1",month:"",count:0,now:"",form:{breakfast:0,lunch:0,dinner:0,traffic:0,sock:0,clothes:0,play:0,others:0},dialogVisible:!1,passsword:{origain:"",newword:"",remewword:""}}},mounted:function(){var t=new Date,e=t.getMonth()+1,o=t.getFullYear();e=e<10?"0"+e:e,this.month=o+"-"+e,console.log(this.nextmonth),this.now=o+"-"+e,this.init()},computed:{name:function(){return this.$store.state.name},eat:function(){return this.form.breakfast+this.form.lunch+this.form.dinner},nextmonth:function(){var t=this.month.split("-"),e="";if(12==parseInt(t[1]))e=parseInt(t[0])+1+"-01";else{var o=parseInt(t[1])+1;e=t[0]+"-"+(o<10?"0"+o:o)}return e}},methods:{handleSelect:function(t,e){console.log(t,e)},init:function(){var t,e,o=this;o.count=0,(t=this.month,e=this.nextmonth,m.a.post("/getSumByDate",{month:t,nextmonth:e})).then(function(t){console.log(t.data.data[0]);var e=t.data.data[0];for(var n in e)if(null==e[n]){o.count+=0;var r=n.split(")")[0].split("(")[1];o.form[r]=0}else{o.count+=e[n],console.log(e[n]);var s=n.split(")")[0].split("(")[1];o.form[s]=e[n]}}).catch(function(t){console.log(t)})},change:function(){console.log(this.nextmonth),this.month<"2018-05"&&(this.month="2018-05",this.$message.error("2018-05是最早时间")),this.month>this.now&&(this.month=this.now,this.$message.error(this.now+"是最晚时间")),this.init()},loginout:function(){var t=this;this.$confirm("确认退出?","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(function(){t.out()}).catch(function(){})},out:function(){sessionStorage.removeItem("name"),this.$router.push("/")},changePas:function(){if(""!=this.passsword.origain)if(""!=this.passsword.newword)if(""!=this.passsword.remewword)if(this.passsword.remewword==this.passsword.newword){var t,e,o=this;(t=this.passsword.origain,e=this.passsword.newword,m.a.post("/changePassword",{password:t,newPas:e})).then(function(t){console.log(t);var e=t.data;1==e.code?(o.$message.success("修改成功"),o.dialogVisible=!1):o.$message.error(e.msg)}).catch(function(t){console.log(t),o.$message.error("未知异常")})}else this.$message.error("新的的密码与重复密码不一致");else this.$message.error("重复密码");else this.$message.error("请输入新的的密码");else this.$message.error("请输入原来的密码")}},components:{forms:y}},I={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{staticStyle:{height:"100%"}},[o("el-header",[o("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex2,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[o("el-menu-item",{attrs:{index:"1"}},[t._v("消费记录")]),t._v(" "),o("el-menu-item",{attrs:{index:"2"}},[t._v("消息中心")]),t._v(" "),o("el-menu-item",{attrs:{index:"3"}},[o("a",{attrs:{href:"https://www.ele.me",target:"_blank"}},[t._v("订单管理")])]),t._v(" "),o("el-submenu",{staticStyle:{float:"right"},attrs:{index:"4"}},[o("template",{slot:"title"},[o("span",[t._v("欢迎你 "+t._s(t.name))])]),t._v(" "),o("el-menu-item",{attrs:{index:"4-1"},on:{click:t.loginout}},[t._v("退出")]),t._v(" "),o("el-menu-item",{attrs:{index:"4-2"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("修改密码")])],2)],1)],1),t._v(" "),o("el-main",[o("div",{staticClass:"main"},[o("div",{staticClass:"mian-content"},[o("forms",{on:{goinit:t.init}})],1),t._v(" "),o("div",{staticClass:"main-remind"},[o("div",{staticClass:"remind"},[o("div",{staticClass:"remind-title"},[t._v("整月小结")]),t._v(" "),o("ul",[o("li",[t._v("月份"),o("el-date-picker",{staticStyle:{width:"150px",float:"right"},attrs:{type:"month",placeholder:"选择日期",format:"yyyy-MM","value-format":"yyyy-MM"},on:{change:t.change},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1),t._v(" "),o("li",[t._v("吃饭费用："+t._s(t.eat)+"   早中晚:("+t._s(t.form.breakfast)+","+t._s(t.form.lunch)+","+t._s(t.form.dinner)+" )")]),t._v(" "),o("li",[t._v("交通费用："+t._s(t.form.traffic))]),t._v(" "),o("li",[t._v("零食费用："+t._s(t.form.sock))]),t._v(" "),o("li",[t._v("衣服费用："+t._s(t.form.clothes))]),t._v(" "),o("li",[t._v("游玩费用："+t._s(t.form.play))]),t._v(" "),o("li",[t._v("其他费用："+t._s(t.form.others))]),t._v(" "),o("li",[t._v("费用总计："+t._s(t.count))])])])])])]),t._v(" "),o("el-dialog",{attrs:{title:"修改密码",visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-form",{ref:"passsword",attrs:{model:t.passsword,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"原来密码"}},[o("el-input",{attrs:{type:""},model:{value:t.passsword.origain,callback:function(e){t.$set(t.passsword,"origain",e)},expression:"passsword.origain"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"新的密码"}},[o("el-input",{attrs:{type:""},model:{value:t.passsword.newword,callback:function(e){t.$set(t.passsword,"newword",e)},expression:"passsword.newword"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"重复密码"}},[o("el-input",{attrs:{type:""},model:{value:t.passsword.remewword,callback:function(e){t.$set(t.passsword,"remewword",e)},expression:"passsword.remewword"}})],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.changePas}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var R=o("VU/8")($,I,!1,function(t){o("thqp")},"data-v-744a4896",null).exports;n.default.use(a.a);var S=new a.a({routes:[{path:"/",name:"index",component:v},{path:"/register",name:"register",component:b},{path:"/main",name:"main",component:R,meta:{requireAuth:!0}}]}),C=o("zL8q"),E=o.n(C);o("tvR6");n.default.use(u.a),n.default.prototype.$ajax=m.a,n.default.use(E.a),n.default.config.productionTip=!1,S.beforeEach(function(t,e,o){t.meta.requireAuth?(console.log(h.state.name),sessionStorage.getItem("name")?o():o({path:"/",query:{redirect:t.fullPath}})):o()}),new n.default({el:"#app",router:S,components:{App:s},template:"<App/>"})},PeR1:function(t,e){},Ugm9:function(t,e){},thqp:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b1c880752dbf840b7006.js.map